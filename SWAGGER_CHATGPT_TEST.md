# Swagger UI ChatGPT-5 è¿æ¥æµ‹è¯•æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•åœ¨ Swagger UI ä¸­æµ‹è¯• ChatGPT-5 API è¿æ¥ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd /Users/ierx/cursor_workspace/trade-view/backend
python3 main.py
```

### 2. æ‰“å¼€ Swagger UI

åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
```
http://localhost:3000/docs
```

### 3. è®¤è¯ç™»å½•

1. ç‚¹å‡»å³ä¸Šè§’çš„ **"Authorize"** æŒ‰é’®
2. è¾“å…¥ä½ çš„ JWT Tokenï¼ˆæ ¼å¼ï¼š`Bearer <your_token>`ï¼‰
3. ç‚¹å‡» **"Authorize"** å®Œæˆè®¤è¯

**è·å– Tokenï¼š**
- å…ˆè°ƒç”¨ `/api/auth/login` æˆ– `/api/auth/register` è·å– token
- æˆ–è€…ä½¿ç”¨å·²æœ‰çš„ token

---

## ğŸ§ª æµ‹è¯• ChatGPT-5 è¿æ¥

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ä¸“ç”¨æµ‹è¯•ç«¯ç‚¹ï¼ˆæ¨èï¼‰

**ç«¯ç‚¹ï¼š** `GET /api/analysis/test-chatgpt`

**æ­¥éª¤ï¼š**

1. åœ¨ Swagger UI ä¸­æ‰¾åˆ° **"AIåˆ†æ"** æ ‡ç­¾
2. å±•å¼€ `GET /api/analysis/test-chatgpt`
3. ç‚¹å‡» **"Try it out"**
4. ç‚¹å‡» **"Execute"**

**è¿”å›ç»“æœç¤ºä¾‹ï¼š**

```json
{
  "status": "success",
  "token_configured": true,
  "api_url": "https://space.ai-builders.com/backend/v1/chat/completions",
  "model": "gpt-5",
  "response_time": 2.5,
  "message": "ChatGPT-5è¿æ¥æˆåŠŸ",
  "test_response": "ä½ å¥½ï¼æˆ‘æ˜¯ChatGPT-5ï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡...",
  "response_status": 200
}
```

**æˆåŠŸæ ‡å¿—ï¼š**
- âœ… `status: "success"`
- âœ… `token_configured: true`
- âœ… `response_status: 200`
- âœ… `test_response` åŒ…å«AIå›å¤å†…å®¹

**å¤±è´¥æƒ…å†µï¼š**

1. **Tokenæœªé…ç½®ï¼š**
```json
{
  "status": "error",
  "token_configured": false,
  "message": "AI_BUILDER_TOKENæœªé…ç½®ï¼Œè¯·åœ¨.envæ–‡ä»¶ä¸­è®¾ç½®"
}
```

2. **APIé”™è¯¯ï¼š**
```json
{
  "status": "error",
  "token_configured": true,
  "response_status": 401,
  "message": "APIè¯·æ±‚å¤±è´¥: HTTP 401",
  "error_detail": "Unauthorized"
}
```

3. **ç½‘ç»œé”™è¯¯ï¼š**
```json
{
  "status": "error",
  "token_configured": true,
  "message": "ç½‘ç»œè¿æ¥é”™è¯¯: ClientConnectorError",
  "error_detail": "Cannot connect to host..."
}
```

---

### æ–¹æ³•äºŒï¼šä½¿ç”¨å®é™…åˆ†æç«¯ç‚¹

**ç«¯ç‚¹ï¼š** `GET /api/analysis/trade-summary`

**æ­¥éª¤ï¼š**

1. åœ¨ Swagger UI ä¸­æ‰¾åˆ° **"AIåˆ†æ"** æ ‡ç­¾
2. å±•å¼€ `GET /api/analysis/trade-summary`
3. ç‚¹å‡» **"Try it out"**
4. è®¾ç½®å‚æ•°ï¼š
   - `use_ai`: `true` ï¼ˆå¯ç”¨AIåˆ†æï¼‰
5. ç‚¹å‡» **"Execute"**

**è¿”å›ç»“æœï¼š**

å¦‚æœè¿æ¥æˆåŠŸï¼Œ`detailed_analysis` å­—æ®µä¼šåŒ…å«ChatGPT-5çš„åˆ†æç»“æœã€‚

---

## ğŸ“Š æŸ¥çœ‹åç«¯æ—¥å¿—

### æµ‹è¯•ç«¯ç‚¹æ—¥å¿—è¾“å‡º

**æˆåŠŸæƒ…å†µï¼š**
```
================================================================================
ğŸ§ª [ChatGPTæµ‹è¯•] ç”¨æˆ· xxx å¼€å§‹æµ‹è¯•ChatGPT-5è¿æ¥
================================================================================
ğŸ”‘ [ChatGPTæµ‹è¯•] Tokené…ç½®çŠ¶æ€: âœ… å·²é…ç½®
ğŸ”‘ [ChatGPTæµ‹è¯•] Tokenå‰ç¼€: sk_cb7877e7_e4382f5e...
ğŸŒ [ChatGPTæµ‹è¯•] APIç«¯ç‚¹: https://space.ai-builders.com/backend/v1/chat/completions
ğŸ¤– [ChatGPTæµ‹è¯•] æ¨¡å‹: gpt-5
ğŸ“ [ChatGPTæµ‹è¯•] æµ‹è¯•æ¶ˆæ¯: ä½ å¥½ï¼Œè¯·ç”¨ä¸€å¥è¯ä»‹ç»ä½ è‡ªå·±ã€‚
ğŸ“¤ [ChatGPTæµ‹è¯•] å‘é€è¯·æ±‚...
ğŸ“¥ [ChatGPTæµ‹è¯•] å“åº”çŠ¶æ€ç : 200
â±ï¸ [ChatGPTæµ‹è¯•] å“åº”æ—¶é—´: 2.50ç§’
================================================================================
âœ… [ChatGPTæµ‹è¯•] ChatGPT-5è¿æ¥æˆåŠŸï¼
ğŸ“ [ChatGPTæµ‹è¯•] å“åº”å†…å®¹: ä½ å¥½ï¼æˆ‘æ˜¯ChatGPT-5...
================================================================================
```

**å¤±è´¥æƒ…å†µï¼š**
```
================================================================================
ğŸ§ª [ChatGPTæµ‹è¯•] ç”¨æˆ· xxx å¼€å§‹æµ‹è¯•ChatGPT-5è¿æ¥
================================================================================
âš ï¸ [ChatGPTæµ‹è¯•] AI_BUILDER_TOKENæœªè®¾ç½®
```

æˆ–

```
âŒ [ChatGPTæµ‹è¯•] APIé”™è¯¯: 401
âŒ [ChatGPTæµ‹è¯•] é”™è¯¯è¯¦æƒ…: {"error": "Invalid API key"}
```

---

### AIåˆ†æç«¯ç‚¹æ—¥å¿—è¾“å‡º

**å®Œæ•´æµç¨‹ï¼š**
```
================================================================================
ğŸ¤– [AIåˆ†æ] ç”¨æˆ· xxx è¯·æ±‚AIæ·±åº¦åˆ†æ
ğŸ“Š [AIåˆ†æ] æ•°æ®å‡†å¤‡:
   â€¢ äº¤æ˜“è®°å½•æ•°: 10æ¡
   â€¢ èµ„é‡‘æ›²çº¿æ•°æ®: 30æ¡
   â€¢ å·²å¹³ä»“äº¤æ˜“: 8æ¡
   â€¢ ç›ˆåˆ©äº¤æ˜“: 5æ¡
   â€¢ äºæŸäº¤æ˜“: 3æ¡
================================================================================

================================================================================
ğŸ¤– [ChatGPT-5] å¼€å§‹AIäº¤æ˜“åˆ†æ
================================================================================
ğŸ”‘ [ChatGPT-5] TokençŠ¶æ€: âœ… å·²é…ç½®
ğŸ”‘ [ChatGPT-5] Tokenå‰ç¼€: sk_cb7877e7_e4382f5e...
ğŸŒ [ChatGPT-5] APIç«¯ç‚¹: https://space.ai-builders.com/backend/v1/chat/completions
ğŸ¤– [ChatGPT-5] æ¨¡å‹: gpt-5
ğŸ“ [ChatGPT-5] æ­£åœ¨æ„å»ºåˆ†ææç¤º...
ğŸ“Š [ChatGPT-5] æ•°æ®ç»Ÿè®¡:
   â€¢ äº¤æ˜“è®°å½•æ•°: 10æ¡
   â€¢ èµ„é‡‘æ›²çº¿æ•°æ®: 30æ¡
   â€¢ æç¤ºè¯é•¿åº¦: 5234å­—ç¬¦
   â€¢ å·²å¹³ä»“äº¤æ˜“: 8æ¡
   â€¢ ç›ˆåˆ©äº¤æ˜“: 5æ¡
   â€¢ äºæŸäº¤æ˜“: 3æ¡
ğŸ“¤ [ChatGPT-5] å‘é€APIè¯·æ±‚...
ğŸ“¤ [ChatGPT-5] è¯·æ±‚å‚æ•°:
   â€¢ Model: gpt-5
   â€¢ Temperature: 1.0
   â€¢ Max Tokens: 3000
   â€¢ System Messageé•¿åº¦: 89å­—ç¬¦
   â€¢ User Messageé•¿åº¦: 5234å­—ç¬¦
ğŸ“¥ [ChatGPT-5] æ”¶åˆ°APIå“åº”
ğŸ“¥ [ChatGPT-5] HTTPçŠ¶æ€ç : 200
â±ï¸ [ChatGPT-5] è¯·æ±‚è€—æ—¶: 3.45ç§’
================================================================================
âœ… [ChatGPT-5] AIåˆ†ææˆåŠŸï¼
ğŸ“ [ChatGPT-5] å“åº”è¯¦æƒ…:
   â€¢ å“åº”é•¿åº¦: 2847å­—ç¬¦
   â€¢ æ€»Tokenæ•°: 1250
   â€¢ æç¤ºToken: 850
   â€¢ å®ŒæˆToken: 400
â±ï¸ [ChatGPT-5] æ€»è€—æ—¶: 3.52ç§’
ğŸ“„ [ChatGPT-5] å“åº”é¢„è§ˆ: {"stop_loss_analysis": "æ ¹æ®æ‚¨çš„äº¤æ˜“å†å²...
================================================================================
âœ… [ChatGPT-5] å“åº”è§£æå®Œæˆ

================================================================================
âœ… [AIåˆ†æ] AIåˆ†æå®Œæˆ
â±ï¸ [AIåˆ†æ] æ€»è€—æ—¶: 3.52ç§’
ğŸ“ [AIåˆ†æ] åˆ†æç»“æœå­—æ®µ:
   â€¢ æ­¢æŸåˆ†æ: 456å­—ç¬¦
   â€¢ æ­¢ç›ˆåˆ†æ: 523å­—ç¬¦
   â€¢ å…¥åœºåˆ†æ: 412å­—ç¬¦
   â€¢ ç›ˆäºæ¯”åˆ†æ: 389å­—ç¬¦
   â€¢ èµ„é‡‘ç®¡ç†: 678å­—ç¬¦
   â€¢ å…³é”®æ´å¯Ÿ: 3æ¡
   â€¢ å»ºè®®: 3æ¡
================================================================================
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šTokenæœªé…ç½®

**ç—‡çŠ¶ï¼š**
- `token_configured: false`
- æ—¥å¿—æ˜¾ç¤ºï¼š`âš ï¸ AI_BUILDER_TOKENæœªè®¾ç½®`

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ `backend/.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
2. ç¡®è®¤ `AI_BUILDER_TOKEN` å·²è®¾ç½®
3. é‡å¯åç«¯æœåŠ¡

```bash
cd backend
cat .env | grep AI_BUILDER_TOKEN
```

---

### é—®é¢˜2ï¼šAPIè¿”å›401é”™è¯¯

**ç—‡çŠ¶ï¼š**
- `response_status: 401`
- é”™è¯¯è¯¦æƒ…ï¼š`Unauthorized` æˆ– `Invalid API key`

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥Tokenæ˜¯å¦æ­£ç¡®
2. ç¡®è®¤Tokenæœªè¿‡æœŸ
3. éªŒè¯Tokenæ ¼å¼ï¼š`sk_xxxxxxxx_...`

---

### é—®é¢˜3ï¼šç½‘ç»œè¿æ¥é”™è¯¯

**ç—‡çŠ¶ï¼š**
- `ClientConnectorError`
- `Cannot connect to host`

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ç¡®è®¤APIç«¯ç‚¹å¯è®¿é—®ï¼š`https://space.ai-builders.com/backend/v1/chat/completions`
3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

---

### é—®é¢˜4ï¼šå“åº”è¶…æ—¶

**ç—‡çŠ¶ï¼š**
- `TimeoutError`
- è¯·æ±‚è€—æ—¶è¶…è¿‡90ç§’

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ç½‘ç»œé€Ÿåº¦
2. å‡å°‘äº¤æ˜“æ•°æ®é‡ï¼ˆæµ‹è¯•æ—¶ï¼‰
3. å¢åŠ è¶…æ—¶æ—¶é—´ï¼ˆå¦‚éœ€è¦ï¼‰

---

## ğŸ“ æ—¥å¿—ç›‘æ§æœ€ä½³å®è·µ

### 1. å®æ—¶ç›‘æ§æ—¥å¿—

```bash
# ä½¿ç”¨ tail å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f backend/backend.log | grep ChatGPT

# æˆ–ä½¿ç”¨ grep è¿‡æ»¤å…³é”®ä¿¡æ¯
tail -f backend/backend.log | grep -E "(ChatGPT|AIåˆ†æ|Token|é”™è¯¯)"
```

### 2. å…³é”®æ—¥å¿—æ ‡è®°

**æˆåŠŸæ ‡è®°ï¼š**
- âœ… `ChatGPT-5è¿æ¥æˆåŠŸ`
- âœ… `AIåˆ†ææˆåŠŸ`
- âœ… `TokençŠ¶æ€: âœ… å·²é…ç½®`

**è­¦å‘Šæ ‡è®°ï¼š**
- âš ï¸ `AI_BUILDER_TOKENæœªè®¾ç½®`
- âš ï¸ `æ„å»ºè¯¦ç»†åˆ†æå¯¹è±¡å¤±è´¥`

**é”™è¯¯æ ‡è®°ï¼š**
- âŒ `APIé”™è¯¯`
- âŒ `ç½‘ç»œè¿æ¥é”™è¯¯`
- âŒ `AIåˆ†æå¤±è´¥`

### 3. æ€§èƒ½ç›‘æ§

å…³æ³¨ä»¥ä¸‹æŒ‡æ ‡ï¼š
- **å“åº”æ—¶é—´**ï¼š`â±ï¸ [ChatGPT-5] è¯·æ±‚è€—æ—¶`
- **Tokenä½¿ç”¨**ï¼š`æ€»Tokenæ•°`ã€`æç¤ºToken`ã€`å®ŒæˆToken`
- **æ•°æ®é‡**ï¼š`äº¤æ˜“è®°å½•æ•°`ã€`æç¤ºè¯é•¿åº¦`

---

## ğŸ¯ æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] åç«¯æœåŠ¡å·²å¯åŠ¨
- [ ] `.env` æ–‡ä»¶ä¸­é…ç½®äº† `AI_BUILDER_TOKEN`
- [ ] åœ¨ Swagger UI ä¸­å·²å®Œæˆè®¤è¯
- [ ] è°ƒç”¨ `/api/analysis/test-chatgpt` è¿”å› `status: "success"`
- [ ] åç«¯æ—¥å¿—æ˜¾ç¤º `âœ… ChatGPT-5è¿æ¥æˆåŠŸ`
- [ ] è°ƒç”¨ `/api/analysis/trade-summary?use_ai=true` è¿”å›åˆ†æç»“æœ
- [ ] æ—¥å¿—æ˜¾ç¤ºå®Œæ•´çš„è¯·æ±‚å’Œå“åº”ä¿¡æ¯

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `AI_SETUP_GUIDE.md` - AIé…ç½®å®Œæ•´æŒ‡å—
- `SWAGGER_UI_GUIDE.md` - Swagger UIä½¿ç”¨æŒ‡å—
- `DEBUG_GUIDE.md` - è°ƒè¯•æŒ‡å—

---

## ğŸ’¡ æç¤º

1. **é¦–æ¬¡æµ‹è¯•**ï¼šå»ºè®®å…ˆä½¿ç”¨ `/api/analysis/test-chatgpt` ç«¯ç‚¹ï¼Œå¿«é€ŸéªŒè¯è¿æ¥
2. **æ—¥å¿—æŸ¥çœ‹**ï¼šä¿æŒåç«¯æ—¥å¿—çª—å£æ‰“å¼€ï¼Œå®æ—¶æŸ¥çœ‹APIè°ƒç”¨æƒ…å†µ
3. **æ€§èƒ½ç›‘æ§**ï¼šå…³æ³¨å“åº”æ—¶é—´ï¼Œæ­£å¸¸æƒ…å†µä¸‹åº”åœ¨5-10ç§’å†…å®Œæˆ
4. **é”™è¯¯å¤„ç†**ï¼šå¦‚æœé‡åˆ°é”™è¯¯ï¼ŒæŸ¥çœ‹æ—¥å¿—ä¸­çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯

---

**ç°åœ¨æ‚¨å¯ä»¥åœ¨ Swagger UI ä¸­æµ‹è¯• ChatGPT-5 è¿æ¥äº†ï¼** ğŸš€
